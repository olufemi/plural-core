# ---- DO NOT set profiles here (let Maven profile or -Dspring.profiles.active pick it)
# spring.profiles.active=@spring.profiles.active@
spring.profiles.active=dev
spring.application.name=fxpeer-exchange-service

spring.flyway.enabled=false

create.quote.send.to.third.party=${CREATE_QUOTE_SEND_TO_THIRD_PARTY:0}

fcm.service.account.file=${FCM_SERVICE_ACCOUNT_FILE:/root/secrets/firebase/plural-c68db-firebase-adminsdk-fbsvc-f67b0d079e.json}
fcm.project.id=${FCM_PROJECT_ID:plural-c68db}

spring.datasource.url=${SPRING_DS_URL:jdbc:mysql://localhost:3306/finwealthpayment?useSSL=false}
spring.datasource.username=${SPRING_DS_USERNAME:test}
spring.datasource.password=${SPRING_DS_PASS:test}

# SMTP (dev-friendly defaults)
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false

# PDFs
receipt.pdf.dir=/tmp/receipts

# JPA
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Feign/HTTP
feign.httpclient.disableSslValidation=true
feign.httpclient.enabled=false
feign.okhttp.enabled=true

server.port=7007

# Discovery/Tracing
eureka.client.serviceUrl.defaultZone=${DISCOVERY_SERVICE_HOST:http://localhost:5088/eureka}
spring.zipkin.base-url=${ZIPKIN_SERVER_URL:http://localhost:9411}
spring.sleuth.sampler.rate=10

# Thread pool + Redis
nxg.threadpool.queue-capacity=${THREADPOOL_QUEUE_CAPACITY:3000}
nxg.threadpool.core-pool-size=${THREADPOOL_CORE_POOL_SIZE:10}
nxg.threadpool.max-pool-size=${THREADPOOL_MAX_POOL_SIZE:20}
nxg.redis.host=${REDIS_HOST:192.168.60.194}
nxg.redis.password=${REDIS_PASSWORD:1}

# HTTP limits
server.max-http-header-size=2MB
server.tomcat.max-swallow-size=2MB
server.tomcat.max-http-form-post-size=2MB

# External Ledger
ledger.base-url=http://localhost:8081

# OTP
fin.wealth.otp.expiry-period-in-minutes=10
fin.wealth.otp.encrypt.key=${UTILITY_OTP_KEY:ed36e39b7de30ad8db7137af61f898ec}
fin.wealth.otp.retry=3

# Flyway (enabled globally; see test override below if needed)
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
